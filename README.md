# AB Experiments API

–ü—Ä–æ—Å—Ç–æ–π REST API –¥–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è A/B‚Äë—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤.  
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –Ω–∞ NestJS, TypeScript –∏ PostgreSQL —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º TypeORM.

## üöÄ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (JWT)**
  - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –õ–æ–≥–∏–Ω –∏ –≤—ã–¥–∞—á–∞ JWT
- **–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã**
  - –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º (–∑–∞—â–∏—â—ë–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç)
  - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ (switch to `finished`, –∑–∞—â–∏—â—ë–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç)
  - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (`deviceId`)
    - –ù–∞ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç _–≤—Å–µ_ –∞–∫—Ç–∏–≤–Ω—ã–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã
    - –ù–∞ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ ‚Äî —Ç–æ–ª—å–∫–æ —Ç–µ, —á—Ç–æ –∑–∞–ø—É—â–µ–Ω—ã –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
  - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ –±–∞–∑—É (–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å)
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**
  - –û–±—â–µ–µ —á–∏—Å–ª–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø–æ –∫–∞–∂–¥–æ–º—É —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—É
  - –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º (–∫–æ–ª-–≤–æ + %) (–∑–∞—â–∏—â—ë–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç)

## üß∞ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- [NestJS](https://nestjs.com/) (Node.js —Ñ—Ä–µ–π–º–≤–æ—Ä–∫)
- TypeScript
- [TypeORM](https://typeorm.io/)
- PostgreSQL
- JWT + Passport
- `pnpm` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–∫–µ—Ç–∞–º–∏

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git clone <repo_url>
   cd ab-experiments
   ```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   pnpm install
   ```

3. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏:
   ```bash
   PORT=<port>
   DATABASE_URL=postgres://<user>:<password>@<host>:<port>/<db_name>
   JWT_SECRET=your_jwt_secret
   ```

4. –ü–æ–¥–Ω—è—Ç—å PostgreSQL –≤ Docker (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):
   ```bash
   docker run --name <your-container-name> \
   -e POSTGRES_USER=<db_user> \
   -e POSTGRES_PASSWORD=<db_password> \
   -e POSTGRES_DB=<db_name> \
   -p <your-local-port>:5432 \
   -d postgres
   ```

## üöÄ –ó–∞–ø—É—Å–∫
   
   ```bash
   pnpm run start
   ```

## üìä Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ Swagger –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:

   ```bash
   http://<your-domain-or-ip>/api/docs
   ```
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤–∫–ª—é—á–∞–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤, DTO, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –º–æ–¥–µ–ª–µ–π.